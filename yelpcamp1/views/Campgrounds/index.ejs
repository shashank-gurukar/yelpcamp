<% layout ('/Layout/boilerplate.ejs') %>
<div id="map" style="width: 100%; height: 300px;"></div>
<script> const campgrounds= {features: <%- JSON.stringify(campground)%>} ;; 
const mapToken= '<%- process.env.MAPBOX_TOKEN %>'; </script>
   
    <h1>All Campgrounds</h1>

    <% for(let camp of campground){ %>
        <div class="card" mb-3>
          
            <div class="row">
                <div class="col-md-4">
                    <% if(camp.Image.length){ %><img class="d-block w-100" src="<%= camp.Image[0].url %>" alt=""> </div>
                    <% }else{ %>
                        <img class="d-block w-100" src="https://res.cloudinary.com/dzpmxal4n/image/upload/v1690568460/cld-sample-5.jpg" ></div>
                        <% } %>
                <div class="col-md-8">
                <div class="card-body">
                    <div class="card-title"><%= camp.title %></div>
                    <p class="card-text"><%- camp.description %></p>
                    <p class="card-text">
                        <small class="text-muted"><%= camp.location %></small>
                    </p>
                    <small class="text-muted"><%= camp.author.username %></small>
                
                    <a href="/campgrounds/<%= camp._id %>" class="btn btn-primary">view <%= camp.title  %></a>
                </div>
             </div>

            </div>
        </div>
  
<% }  %>


<a href="/campgrounds/new">Add new campground</a>
<script src="js/clusterMap.js">

</script>